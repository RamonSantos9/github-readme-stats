
> meu-github-readme-stats@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --coverage

(node:26008) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:9052) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:26748) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:18084) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/fmt.test.js
(node:24116) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/fmt.test.ts
  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: n├úo deve quebrar textos pequenos

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Array [
    -   "Pequeno texto n├úo deve quebrar",
    +   "Pequeno texto n&#227;o deve quebrar",
      ]

      72 |   it("wrapTextMultiline: n├úo deve quebrar textos pequenos", () => {
      73 |     const multiLineText = wrapTextMultiline("Pequeno texto n├úo deve quebrar");
    > 74 |     expect(multiLineText).toEqual(["Pequeno texto n├úo deve quebrar"]);
         |                           ^
      75 |   });
      76 |
      77 |   it("wrapTextMultiline: deve quebrar textos grandes", () => {

      at Object.toEqual (tests/fmt.test.ts:74:27)

  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: deve quebrar textos grandes

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   "Ol├í mundo texto longo",
    -   "longo longo",
    +   "Ol&#225; mundo texto",
    +   "longo longo longo",
      ]

      81 |       3,
      82 |     );
    > 83 |     expect(multiLineText).toEqual(["Ol├í mundo texto longo", "longo longo"]);
         |                           ^
      84 |   });
      85 |
      86 |   it("wrapTextMultiline: deve quebrar textos grandes e limitar o m├íximo de linhas", () => {

      at Object.toEqual (tests/fmt.test.ts:83:27)

  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: deve quebrar textos grandes e limitar o m├íximo de linhas

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   "Ol├í",
    -   "mundo longo...",
    +   "Ol&#225;",
    +   "mundo...",
      ]

      90 |       2,
      91 |     );
    > 92 |     expect(multiLineText).toEqual(["Ol├í", "mundo longo..."]);
         |                           ^
      93 |   });
      94 |
      95 |   it("wrapTextMultiline: deve quebrar chin├¬s por pontua├º├úo", () => {

      at Object.toEqual (tests/fmt.test.ts:92:27)

(node:5008) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:8856) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:24100) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:21548) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/pat-info.test.js
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: ÔÜÖ´©Å  override existing env vars with { override: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

FAIL tests/api.test.js
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: ÔÜÖ´©Å  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  ÔùÅ Test /api/ ÔÇ║ should render error card when include_all_commits true and upstream API fails

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado!</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Could not fetch total commits.</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\">Please try again later</tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado!</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">N&#227;o foi poss&#237;vel buscar o total de commits.</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\">Please try again later</tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      399 |
      400 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 401 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      402 |       renderError({
      403 |         message: "Could not fetch total commits.",
      404 |         secondaryMessage: "Please try again later",

      at Object.toHaveBeenCalledWith (tests/api.test.js:401:22)

(node:27264) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/fetchTopLanguages.test.js
  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while using the new calculation

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 20.000000000000004,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 20.000000000000004,
        },
      }

      66 |
      67 |     let repo = await fetchTopLanguages("ramonsantos9", [], 0.5, 0.5);
    > 68 |     expect(repo).toStrictEqual({
         |                  ^
      69 |       HTML: {
      70 |         color: "#0f0",
      71 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:68:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while excluding the 'test-repo-1' repository

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 1,
          "name": "HTML",
          "size": 100,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 200,
        },
      }

      86 |
      87 |     let repo = await fetchTopLanguages("ramonsantos9", ["test-repo-1"]);
    > 88 |     expect(repo).toStrictEqual({
         |                  ^
      89 |       HTML: {
      90 |         color: "#0f0",
      91 |         count: 1,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:88:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while using the old calculation

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 200,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 200,
        },
      }

      106 |
      107 |     let repo = await fetchTopLanguages("ramonsantos9", [], 1, 0);
    > 108 |     expect(repo).toStrictEqual({
          |                  ^
      109 |       HTML: {
      110 |         color: "#0f0",
      111 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:108:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should rank languages by the number of repositories they appear in

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 2,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 2,
        },
      }

      126 |
      127 |     let repo = await fetchTopLanguages("ramonsantos9", [], 0, 1);
    > 128 |     expect(repo).toStrictEqual({
          |                  ^
      129 |       HTML: {
      130 |         color: "#0f0",
      131 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:128:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should throw error with specific message when error does not contain message property

    expect(received).rejects.toThrow(expected)

    Expected substring: "Something went wrong while trying to retrieve the language data using the GraphQL API."
    Received message:   "Ocorreu um erro ao buscar os dados de linguagens via GraphQL."

          104 |       );
          105 |     }
        > 106 |     throw new CustomError(
              |           ^
          107 |       "Ocorreu um erro ao buscar os dados de linguagens via GraphQL.",
          108 |       CustomError.GRAPHQL_ERROR,
          109 |     );

      at fetchTopLanguages (src/fetchers/top-languages.ts:106:11)
      at Object.<anonymous> (tests/fetchTopLanguages.test.js:167:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchTopLanguages.test.js:167:60)

(node:15384) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/card.test.js
FAIL tests/pin.test.js
  ÔùÅ Test /api/pin ÔÇ║ should render error card if user repo not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">User Repository Not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Reposit&#243;rio do usu&#225;rio n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      118 |
      119 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 120 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      121 |       renderError({ message: "User Repository Not found" }),
      122 |     );
      123 |   });

      at Object.toHaveBeenCalledWith (tests/pin.test.js:120:22)

  ÔùÅ Test /api/pin ÔÇ║ should render error card if org repo not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Organization Repository Not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Reposit&#243;rio da organiza&#231;&#227;o n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      141 |
      142 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 143 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      144 |       renderError({ message: "Organization Repository Not found" }),
      145 |     );
      146 |   });

      at Object.toHaveBeenCalledWith (tests/pin.test.js:143:22)

PASS tests/status.up.test.js
(node:4688) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/ops.test.ts
FAIL tests/gist.test.js
  ÔùÅ Test /api/gist ÔÇ║ should render error if gist is not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Gist not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Gist n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      152 |
      153 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 154 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      155 |       renderError({ message: "Gist not found" }),
      156 |     );
      157 |   });

      at Object.toHaveBeenCalledWith (tests/gist.test.js:154:22)

PASS tests/top-langs.test.js
(node:24972) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
D:\Arquivos Programa├º├úo\XispeProjects\github readme stats\node_modules\expect\build\index.js:2155
  const innerErr = new JestAssertionError();
                   ^

[JestAssertionError: expect(received).rejects.toThrow(expected)

Expected message: "Invalid username provided."
Received message: "Nome de usu├írio inv├ílido."

      241 |   if (!githubUsernameRegex.test(username)) {
      242 |     logger.log("Nome de usu├írio inv├ílido.");
    > 243 |     throw new Error("Nome de usu├írio inv├ílido.");
          |           ^
      244 |   }
      245 |
      246 |   let res: any;

      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)
      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)] {
  matcherResult: {
    message: 'expect(received).rejects.toThrow(expected)\n' +
      '\n' +
      'Expected message: "Invalid username provided."\n' +
      'Received message: "Nome de usu├írio inv├ílido."\n' +
      '\n' +
      '    \x1B[0m \x1B[90m 241 |\x1B[39m   \x1B[36mif\x1B[39m (\x1B[33m!\x1B[39mgithubUsernameRegex\x1B[33m.\x1B[39mtest(username)) {\n' +
      '     \x1B[90m 242 |\x1B[39m     logger\x1B[33m.\x1B[39mlog(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '    \x1B[31m\x1B[1m>\x1B[22m\x1B[39m\x1B[90m 243 |\x1B[39m     \x1B[36mthrow\x1B[39m \x1B[36mnew\x1B[39m \x1B[33mError\x1B[39m(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '     \x1B[90m     |\x1B[39m           \x1B[31m\x1B[1m^\x1B[22m\x1B[39m\n' +
      '     \x1B[90m 244 |\x1B[39m   }\n' +
      '     \x1B[90m 245 |\x1B[39m\n' +
      '     \x1B[90m 246 |\x1B[39m   \x1B[36mlet\x1B[39m res\x1B[33m:\x1B[39m any\x1B[33m;\x1B[39m\x1B[0m\n' +
      '\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)',
    pass: false
  }
}

Node.js v22.14.0
PASS tests/ops.test.js
FAIL tests/renderRepoCard.test.js
  ÔùÅ Test renderRepoCard ÔÇ║ should hide language if primaryLanguage is null & fallback to correct values

    expect(element).toHaveTextContent()

    Expected element to have text content:
      Unspecified
    Received:
      N├úo especificado

      120 |     );
      121 |
    > 122 |     expect(queryByTestId(document.body, "lang-name")).toHaveTextContent(
          |                                                       ^
      123 |       "Unspecified",
      124 |     );
      125 |   });

      at Object.toHaveTextContent (tests/renderRepoCard.test.js:122:55)

  ÔùÅ Test renderRepoCard ÔÇ║ should fallback to default description

    expect(element).toHaveTextContent()

    Expected element to have text content:
      No description provided
    Received:
      Sem descri├º├úo

      335 |       isArchived: true,
      336 |     });
    > 337 |     expect(document.getElementsByClassName("description")[0]).toHaveTextContent(
          |                                                               ^
      338 |       "No description provided",
      339 |     );
      340 |   });

      at Object.toHaveTextContent (tests/renderRepoCard.test.js:337:63)

FAIL tests/fetchGist.test.js
  ÔùÅ Test fetchGist ÔÇ║ should throw correct error if gist not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Gist not found"
    Received message:   "Gist n├úo encontrado"

          127 |
          128 |   if (!res.data.data.viewer.gist) {
        > 129 |     throw new Error("Gist n├úo encontrado");
              |           ^
          130 |   }
          131 |
          132 |   const data = res.data.data.viewer.gist;

      at fetchGist (src/fetchers/gist.ts:129:11)
      at Object.<anonymous> (tests/fetchGist.test.js:99:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchGist.test.js:99:73)

PASS tests/wakatime.test.js
PASS tests/color.test.ts
PASS tests/renderTopLanguagesCard.test.js
FAIL tests/retryer.test.ts
  ÔùÅ Testes em common/retryer.ts ÔÇ║ retryer deve lan├ºar erro espec├¡fico se o m├íximo de tentativas for atingido

    expect(received).toBe(expected) // Object.is equality

    Expected: "Downtime devido ao limite de taxa da API do GitHub"
    Received: "Servi├ºo indispon├¡vel por limite de taxa da API do GitHub"

      78 |     } catch (err: any) {
      79 |       expect(fetcherFail).toHaveBeenCalledTimes(RETRIES + 1);
    > 80 |       expect(err.message).toBe(
         |                           ^
      81 |         "Downtime devido ao limite de taxa da API do GitHub",
      82 |       );
      83 |     }

      at Object.toBe (tests/retryer.test.ts:80:27)

FAIL tests/fetchWakatime.test.js
  ÔùÅ WakaTime fetcher ÔÇ║ should throw error if username is not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Could not resolve to a User with the login of 'noone'"
    Received message:   "N├úo foi poss├¡vel encontrar o usu├írio 'noone' no WakaTime."

          55 |   } catch (err: any) {
          56 |     if (err.response?.status < 200 || err.response?.status > 299) {
        > 57 |       throw new CustomError(
             |             ^
          58 |         `N├úo foi poss├¡vel encontrar o usu├írio '${username}' no WakaTime.`,
          59 |         "WAKATIME_USER_NOT_FOUND",
          60 |       );

      at fetchWakatimeStats (src/fetchers/wakatime.ts:57:13)
      at Object.<anonymous> (tests/fetchWakatime.test.js:129:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchWakatime.test.js:129:69)

FAIL tests/retryer.test.js
  ÔùÅ Test Retryer ÔÇ║ retryer should throw specific error if maximum retries reached

    expect(received).toBe(expected) // Object.is equality

    Expected: "Downtime due to GitHub API rate limiting"
    Received: "Servi├ºo indispon├¡vel por limite de taxa da API do GitHub"

      78 |       expect(fetcherFail).toHaveBeenCalledTimes(RETRIES + 1);
      79 |       // @ts-ignore
    > 80 |       expect(err.message).toBe("Downtime due to GitHub API rate limiting");
         |                           ^
      81 |     }
      82 |   });
      83 | });

      at Object.toBe (tests/retryer.test.js:80:27)

PASS tests/calculateRank.test.js
PASS tests/color.test.js
FAIL tests/fetchRepo.test.js
  ÔùÅ Test fetchRepo ÔÇ║ should throw error if user is found but repo is null

    expect(received).rejects.toThrow(expected)

    Expected substring: "User Repository Not found"
    Received message:   "Reposit├│rio do usu├írio n├úo encontrado"

          107 |   if (isUser) {
          108 |     if (!data.user.repository || data.user.repository.isPrivate) {
        > 109 |       throw new Error("Reposit├│rio do usu├írio n├úo encontrado");
              |             ^
          110 |     }
          111 |     return {
          112 |       ...data.user.repository,

      at fetchRepo (src/fetchers/repo.ts:109:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:68:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:68:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if org is found but repo is null

    expect(received).rejects.toThrow(expected)

    Expected substring: "Organization Repository Not found"
    Received message:   "Reposit├│rio da organiza├º├úo n├úo encontrado"

          120 |       data.organization.repository.isPrivate
          121 |     ) {
        > 122 |       throw new Error("Reposit├│rio da organiza├º├úo n├úo encontrado");
              |             ^
          123 |     }
          124 |     return {
          125 |       ...data.organization.repository,

      at fetchRepo (src/fetchers/repo.ts:122:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:78:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:78:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if both user & org data not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Not found"
    Received message:   "N├úo encontrado"

           99 |
          100 |   if (!data.user && !data.organization) {
        > 101 |     throw new Error("N├úo encontrado");
              |           ^
          102 |   }
          103 |
          104 |   const isUser = data.organization === null && data.user;

      at fetchRepo (src/fetchers/repo.ts:101:11)
      at Object.<anonymous> (tests/fetchRepo.test.js:88:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:88:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if repository is private

    expect(received).rejects.toThrow(expected)

    Expected substring: "User Repository Not found"
    Received message:   "Reposit├│rio do usu├írio n├úo encontrado"

          107 |   if (isUser) {
          108 |     if (!data.user.repository || data.user.repository.isPrivate) {
        > 109 |       throw new Error("Reposit├│rio do usu├írio n├úo encontrado");
              |             ^
          110 |     }
          111 |     return {
          112 |       ...data.user.repository,

      at fetchRepo (src/fetchers/repo.ts:109:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:101:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:101:66)

PASS tests/flexLayout.test.js
FAIL tests/renderWakatimeCard.test.js
  ÔùÅ WakaTime fetcher ÔÇ║ should throw error if username is not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Could not resolve to a User with the login of 'noone'"
    Received message:   "N├úo foi poss├¡vel encontrar o usu├írio 'noone' no WakaTime."

          55 |   } catch (err: any) {
          56 |     if (err.response?.status < 200 || err.response?.status > 299) {
        > 57 |       throw new CustomError(
             |             ^
          58 |         `N├úo foi poss├¡vel encontrar o usu├írio '${username}' no WakaTime.`,
          59 |         "WAKATIME_USER_NOT_FOUND",
          60 |       );

      at fetchWakatimeStats (src/fetchers/wakatime.ts:57:13)
      at Object.<anonymous> (tests/fetchWakatime.test.js:129:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchWakatime.test.js:129:69)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

       8 |   it("should render correctly", () => {
       9 |     const card = renderWakatimeCard(wakaTimeData.data);
    > 10 |     expect(card).toMatchSnapshot();
         |                  ^
      11 |   });
      12 |
      13 |   it("should render correctly with compact layout", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:10:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with compact layout

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with compact layout 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      14 |     const card = renderWakatimeCard(wakaTimeData.data, { layout: "compact" });
      15 |
    > 16 |     expect(card).toMatchSnapshot();
         |                  ^
      17 |   });
      18 |
      19 |   it("should render correctly with compact layout when langs_count is set", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:16:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with compact layout when langs_count is set

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with compact layout when langs_count is set 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      23 |     });
      24 |
    > 25 |     expect(card).toMatchSnapshot();
         |                  ^
      26 |   });
      27 |
      28 |   it("should hide languages when hide is passed", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:25:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with percent display format

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with percent display format 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      88 |       display_format: "percent",
      89 |     });
    > 90 |     expect(card).toMatchSnapshot();
         |                  ^
      91 |   });
      92 | });
      93 |

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:90:18)

 ÔÇ║ 4 snapshots failed.
PASS tests/html.test.ts
FAIL tests/i18n.test.ts
  ÔùÅ I18n ÔÇ║ deve lan├ºar erro se a string de tradu├º├úo n├úo for encontrada

    expect(received).toThrow(expected)

    Expected substring: "statcard.title1 Tradu├º├úo n├úo encontrada"
    Received message:   "String de tradu├º├úo \"statcard.title1\" n├úo encontrada"

          67 |   t(str: string): string {
          68 |     if (!this.translations[str]) {
        > 69 |       throw new Error(`String de tradu├º├úo "${str}" n├úo encontrada`);
             |             ^
          70 |     }
          71 |
          72 |     if (!this.translations[str][this.locale]) {

      at I18n.t (src/common/I18n.ts:69:13)
      at t (tests/i18n.test.ts:19:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.ts:19:45)
      at Object.toThrow (tests/i18n.test.ts:19:45)

  ÔùÅ I18n ÔÇ║ deve lan├ºar erro se a tradu├º├úo n├úo for encontrada para o locale

    expect(received).toThrow(expected)

    Expected substring: "'statcard.title' tradu├º├úo n├úo encontrada para o locale 'asdf'"
    Received message:   "Tradu├º├úo para \"statcard.title\" n├úo encontrada para o locale \"asdf\""

          71 |
          72 |     if (!this.translations[str][this.locale]) {
        > 73 |       throw new Error(
             |             ^
          74 |         `Tradu├º├úo para "${str}" n├úo encontrada para o locale "${this.locale}"`,
          75 |       );
          76 |     }

      at I18n.t (src/common/I18n.ts:73:13)
      at t (tests/i18n.test.ts:29:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.ts:29:44)
      at Object.toThrow (tests/i18n.test.ts:29:44)

FAIL tests/i18n.test.js
  ÔùÅ I18n ÔÇ║ should throw error if translation string not found

    expect(received).toThrow(expected)

    Expected substring: "statcard.title1 Translation string not found"
    Received message:   "String de tradu├º├úo \"statcard.title1\" n├úo encontrada"

          67 |   t(str: string): string {
          68 |     if (!this.translations[str]) {
        > 69 |       throw new Error(`String de tradu├º├úo "${str}" n├úo encontrada`);
             |             ^
          70 |     }
          71 |
          72 |     if (!this.translations[str][this.locale]) {

      at I18n.t (src/common/I18n.ts:69:13)
      at t (tests/i18n.test.js:19:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.js:19:45)
      at Object.toThrow (tests/i18n.test.js:19:45)

  ÔùÅ I18n ÔÇ║ should throw error if translation not found for locale

    expect(received).toThrow(expected)

    Expected substring: "'statcard.title' translation not found for locale 'asdf'"
    Received message:   "Tradu├º├úo para \"statcard.title\" n├úo encontrada para o locale \"asdf\""

          71 |
          72 |     if (!this.translations[str][this.locale]) {
        > 73 |       throw new Error(
             |             ^
          74 |         `Tradu├º├úo para "${str}" n├úo encontrada para o locale "${this.locale}"`,
          75 |       );
          76 |     }

      at I18n.t (src/common/I18n.ts:73:13)
      at t (tests/i18n.test.js:29:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.js:29:44)
      at Object.toThrow (tests/i18n.test.js:29:44)

PASS tests/html.test.js
(node:3940) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/renderGistCard.test.js
  ÔùÅ test renderGistCard ÔÇ║ should fallback to default description

    expect(element).toHaveTextContent()

    Expected element to have text content:
      No description provided
    Received:
      Sem descri├º├úo

      233 |       description: undefined,
      234 |     });
    > 235 |     expect(document.getElementsByClassName("description")[0]).toHaveTextContent(
          |                                                               ^
      236 |       "No description provided",
      237 |     );
      238 |   });

      at Object.toHaveTextContent (tests/renderGistCard.test.js:235:63)

(node:25888) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/renderStatsCard.test.js
  ÔùÅ Test renderStatsCard ÔÇ║ should throw error if all stats and rank icon are hidden

    expect(received).toThrow(expected)

    Expected message: "Could not render stats card."
    Received message: "N├úo foi poss├¡vel renderizar o card de estat├¡sticas."

          477 |
          478 |   if (statItems.length === 0 && hide_rank) {
        > 479 |     throw new CustomError(
              |           ^
          480 |       "N├úo foi poss├¡vel renderizar o card de estat├¡sticas.",
          481 |       "Pelo menos as estat├¡sticas ou o rank s├úo obrigat├│rios.",
          482 |     );

      at renderStatsCard (src/cards/stats.ts:479:11)
      at renderStatsCard (tests/renderStatsCard.test.js:461:7)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/renderStatsCard.test.js:465:7)
      at Object.toThrow (tests/renderStatsCard.test.js:465:7)

PASS tests/render.test.js
(node:24588) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
D:\Arquivos Programa├º├úo\XispeProjects\github readme stats\node_modules\expect\build\index.js:2155
  const innerErr = new JestAssertionError();
                   ^

[JestAssertionError: expect(received).rejects.toThrow(expected)

Expected message: "Invalid username provided."
Received message: "Nome de usu├írio inv├ílido."

      241 |   if (!githubUsernameRegex.test(username)) {
      242 |     logger.log("Nome de usu├írio inv├ílido.");
    > 243 |     throw new Error("Nome de usu├írio inv├ílido.");
          |           ^
      244 |   }
      245 |
      246 |   let res: any;

      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)
      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)] {
  matcherResult: {
    message: 'expect(received).rejects.toThrow(expected)\n' +
      '\n' +
      'Expected message: "Invalid username provided."\n' +
      'Received message: "Nome de usu├írio inv├ílido."\n' +
      '\n' +
      '    \x1B[0m \x1B[90m 241 |\x1B[39m   \x1B[36mif\x1B[39m (\x1B[33m!\x1B[39mgithubUsernameRegex\x1B[33m.\x1B[39mtest(username)) {\n' +
      '     \x1B[90m 242 |\x1B[39m     logger\x1B[33m.\x1B[39mlog(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '    \x1B[31m\x1B[1m>\x1B[22m\x1B[39m\x1B[90m 243 |\x1B[39m     \x1B[36mthrow\x1B[39m \x1B[36mnew\x1B[39m \x1B[33mError\x1B[39m(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '     \x1B[90m     |\x1B[39m           \x1B[31m\x1B[1m^\x1B[22m\x1B[39m\n' +
      '     \x1B[90m 244 |\x1B[39m   }\n' +
      '     \x1B[90m 245 |\x1B[39m\n' +
      '     \x1B[90m 246 |\x1B[39m   \x1B[36mlet\x1B[39m res\x1B[33m:\x1B[39m any\x1B[33m;\x1B[39m\x1B[0m\n' +
      '\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)',
    pass: false
  }
}

Node.js v22.14.0
(node:27596) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
D:\Arquivos Programa├º├úo\XispeProjects\github readme stats\node_modules\expect\build\index.js:2155
  const innerErr = new JestAssertionError();
                   ^

[JestAssertionError: expect(received).rejects.toThrow(expected)

Expected message: "Invalid username provided."
Received message: "Nome de usu├írio inv├ílido."

      241 |   if (!githubUsernameRegex.test(username)) {
      242 |     logger.log("Nome de usu├írio inv├ílido.");
    > 243 |     throw new Error("Nome de usu├írio inv├ílido.");
          |           ^
      244 |   }
      245 |
      246 |   let res: any;

      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)
      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)] {
  matcherResult: {
    message: 'expect(received).rejects.toThrow(expected)\n' +
      '\n' +
      'Expected message: "Invalid username provided."\n' +
      'Received message: "Nome de usu├írio inv├ílido."\n' +
      '\n' +
      '    \x1B[0m \x1B[90m 241 |\x1B[39m   \x1B[36mif\x1B[39m (\x1B[33m!\x1B[39mgithubUsernameRegex\x1B[33m.\x1B[39mtest(username)) {\n' +
      '     \x1B[90m 242 |\x1B[39m     logger\x1B[33m.\x1B[39mlog(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '    \x1B[31m\x1B[1m>\x1B[22m\x1B[39m\x1B[90m 243 |\x1B[39m     \x1B[36mthrow\x1B[39m \x1B[36mnew\x1B[39m \x1B[33mError\x1B[39m(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '     \x1B[90m     |\x1B[39m           \x1B[31m\x1B[1m^\x1B[22m\x1B[39m\n' +
      '     \x1B[90m 244 |\x1B[39m   }\n' +
      '     \x1B[90m 245 |\x1B[39m\n' +
      '     \x1B[90m 246 |\x1B[39m   \x1B[36mlet\x1B[39m res\x1B[33m:\x1B[39m any\x1B[33m;\x1B[39m\x1B[0m\n' +
      '\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)',
    pass: false
  }
}

Node.js v22.14.0
(node:25140) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
D:\Arquivos Programa├º├úo\XispeProjects\github readme stats\node_modules\expect\build\index.js:2155
  const innerErr = new JestAssertionError();
                   ^

[JestAssertionError: expect(received).rejects.toThrow(expected)

Expected message: "Invalid username provided."
Received message: "Nome de usu├írio inv├ílido."

      241 |   if (!githubUsernameRegex.test(username)) {
      242 |     logger.log("Nome de usu├írio inv├ílido.");
    > 243 |     throw new Error("Nome de usu├írio inv├ílido.");
          |           ^
      244 |   }
      245 |
      246 |   let res: any;

      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)
      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)] {
  matcherResult: {
    message: 'expect(received).rejects.toThrow(expected)\n' +
      '\n' +
      'Expected message: "Invalid username provided."\n' +
      'Received message: "Nome de usu├írio inv├ílido."\n' +
      '\n' +
      '    \x1B[0m \x1B[90m 241 |\x1B[39m   \x1B[36mif\x1B[39m (\x1B[33m!\x1B[39mgithubUsernameRegex\x1B[33m.\x1B[39mtest(username)) {\n' +
      '     \x1B[90m 242 |\x1B[39m     logger\x1B[33m.\x1B[39mlog(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '    \x1B[31m\x1B[1m>\x1B[22m\x1B[39m\x1B[90m 243 |\x1B[39m     \x1B[36mthrow\x1B[39m \x1B[36mnew\x1B[39m \x1B[33mError\x1B[39m(\x1B[32m"Nome de usu├írio inv├ílido."\x1B[39m)\x1B[33m;\x1B[39m\n' +
      '     \x1B[90m     |\x1B[39m           \x1B[31m\x1B[1m^\x1B[22m\x1B[39m\n' +
      '     \x1B[90m 244 |\x1B[39m   }\n' +
      '     \x1B[90m 245 |\x1B[39m\n' +
      '     \x1B[90m 246 |\x1B[39m   \x1B[36mlet\x1B[39m res\x1B[33m:\x1B[39m any\x1B[33m;\x1B[39m\x1B[0m\n' +
      '\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:243:11)\n' +
      '      at totalCommitsFetcher (src/fetchers/stats.ts:350:32)',
    pass: false
  }
}

Node.js v22.14.0
FAIL tests/fetchStats.test.js
  ÔùÅ Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

-------------------|---------|----------|---------|---------|---------------------------------------------------------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                   
-------------------|---------|----------|---------|---------|---------------------------------------------------------------------
All files          |   96.62 |    84.47 |   97.69 |   96.62 |                                                                     
 api               |   84.67 |    69.64 |     100 |   84.67 |                                                                     
  gist.ts          |   88.09 |       70 |     100 |   88.09 | 51-52,113-125                                                       
  index.ts         |   92.26 |    81.81 |     100 |   92.26 | 155-167                                                             
  pin.ts           |   89.92 |    81.81 |     100 |   89.92 | 116-128                                                             
  top-langs.ts     |   84.65 |    72.22 |     100 |   84.65 | 102-103,105-118,176-188                                             
  wakatime.ts      |   68.27 |    16.66 |     100 |   68.27 | 61-62,65-78,115-144                                                 
 api/status        |   97.17 |    95.23 |     100 |   97.17 |                                                                     
  pat-info.js      |   98.11 |    96.29 |     100 |   98.11 | 104-106                                                             
  up.js            |   95.96 |    93.33 |     100 |   95.96 | 119-123                                                             
 src               |     100 |      100 |     100 |     100 |                                                                     
  calculateRank.ts |     100 |      100 |     100 |     100 |                                                                     
  translations.ts  |     100 |      100 |     100 |     100 |                                                                     
 src/cards         |   98.28 |    84.31 |   95.83 |   98.28 |                                                                     
  gist.ts          |     100 |    84.61 |     100 |     100 | 111-112                                                             
  repo.ts          |     100 |      100 |     100 |     100 |                                                                     
  stats.ts         |   95.43 |    78.94 |      75 |   95.43 | 152-159,168-178,264,266,406,509,537,549,564-565,583-584             
  top-languages.ts |   99.56 |    86.59 |     100 |   99.56 | 410,757,843-844                                                     
  wakatime.ts      |   98.26 |       80 |     100 |   98.26 | 179,268,411-412,442,458-459,478-479                                 
 src/common        |   96.69 |    90.09 |   98.03 |   96.69 |                                                                     
  Card.ts          |   92.56 |     90.9 |    92.3 |   92.56 | 284,296-315,327-336                                                 
  I18n.ts          |     100 |      100 |     100 |     100 |                                                                     
  access.ts        |   87.09 |       75 |     100 |   87.09 | 78-81,90-101                                                        
  blacklist.ts     |     100 |      100 |     100 |     100 |                                                                     
  cache.ts         |   98.59 |    86.66 |     100 |   98.59 | 196-198                                                             
  color.ts         |   97.95 |    96.15 |     100 |   97.95 | 188-191                                                             
  envs.ts          |   93.61 |        0 |     100 |   93.61 | 18,31,44                                                            
  error.ts         |     100 |      100 |     100 |     100 |                                                                     
  fmt.ts           |   95.16 |    88.88 |     100 |   95.16 | 58-59,70-73                                                         
  fonts.ts         |     100 |      100 |     100 |     100 |                                                                     
  html.ts          |     100 |      100 |     100 |     100 |                                                                     
  http.ts          |     100 |      100 |     100 |     100 |                                                                     
  icons.ts         |     100 |    83.33 |     100 |     100 | 84                                                                  
  log.ts           |     100 |       50 |     100 |     100 | 23                                                                  
  ops.ts           |     100 |      100 |     100 |     100 |                                                                     
  render.ts        |     100 |      100 |     100 |     100 |                                                                     
  retryer.ts       |   92.74 |    81.81 |     100 |   92.74 | 63-67,117-120                                                       
 src/fetchers      |    95.3 |    76.63 |     100 |    95.3 |                                                                     
  gist.ts          |     100 |    93.33 |     100 |     100 | 139                                                                 
  repo.ts          |   94.77 |    86.95 |     100 |   94.77 | 90-91,93-94,129-131                                                 
  stats.ts         |   91.77 |    52.77 |     100 |   91.77 | 185,242-244,250-252,261-263,297-298,332-342,358-362,368-369,372-374 
  top-languages.ts |   99.05 |       92 |     100 |   99.05 | 87-88                                                               
  wakatime.ts      |   95.52 |       75 |     100 |   95.52 | 47,62-63                                                            
 themes            |     100 |      100 |     100 |     100 |                                                                     
  index.ts         |     100 |      100 |     100 |     100 |                                                                     
-------------------|---------|----------|---------|---------|---------------------------------------------------------------------
Summary of all failing tests
FAIL tests/fmt.test.ts
  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: n├úo deve quebrar textos pequenos

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Array [
    -   "Pequeno texto n├úo deve quebrar",
    +   "Pequeno texto n&#227;o deve quebrar",
      ]

      72 |   it("wrapTextMultiline: n├úo deve quebrar textos pequenos", () => {
      73 |     const multiLineText = wrapTextMultiline("Pequeno texto n├úo deve quebrar");
    > 74 |     expect(multiLineText).toEqual(["Pequeno texto n├úo deve quebrar"]);
         |                           ^
      75 |   });
      76 |
      77 |   it("wrapTextMultiline: deve quebrar textos grandes", () => {

      at Object.toEqual (tests/fmt.test.ts:74:27)

  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: deve quebrar textos grandes

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   "Ol├í mundo texto longo",
    -   "longo longo",
    +   "Ol&#225; mundo texto",
    +   "longo longo longo",
      ]

      81 |       3,
      82 |     );
    > 83 |     expect(multiLineText).toEqual(["Ol├í mundo texto longo", "longo longo"]);
         |                           ^
      84 |   });
      85 |
      86 |   it("wrapTextMultiline: deve quebrar textos grandes e limitar o m├íximo de linhas", () => {

      at Object.toEqual (tests/fmt.test.ts:83:27)

  ÔùÅ Testes em common/fmt.ts ÔÇ║ wrapTextMultiline: deve quebrar textos grandes e limitar o m├íximo de linhas

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   "Ol├í",
    -   "mundo longo...",
    +   "Ol&#225;",
    +   "mundo...",
      ]

      90 |       2,
      91 |     );
    > 92 |     expect(multiLineText).toEqual(["Ol├í", "mundo longo..."]);
         |                           ^
      93 |   });
      94 |
      95 |   it("wrapTextMultiline: deve quebrar chin├¬s por pontua├º├úo", () => {

      at Object.toEqual (tests/fmt.test.ts:92:27)

FAIL tests/api.test.js
  ÔùÅ Test /api/ ÔÇ║ should render error card when include_all_commits true and upstream API fails

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado!</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Could not fetch total commits.</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\">Please try again later</tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado!</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">N&#227;o foi poss&#237;vel buscar o total de commits.</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\">Please try again later</tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      399 |
      400 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 401 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      402 |       renderError({
      403 |         message: "Could not fetch total commits.",
      404 |         secondaryMessage: "Please try again later",

      at Object.toHaveBeenCalledWith (tests/api.test.js:401:22)

FAIL tests/fetchTopLanguages.test.js
  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while using the new calculation

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 20.000000000000004,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 20.000000000000004,
        },
      }

      66 |
      67 |     let repo = await fetchTopLanguages("ramonsantos9", [], 0.5, 0.5);
    > 68 |     expect(repo).toStrictEqual({
         |                  ^
      69 |       HTML: {
      70 |         color: "#0f0",
      71 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:68:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while excluding the 'test-repo-1' repository

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 1,
          "name": "HTML",
          "size": 100,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 200,
        },
      }

      86 |
      87 |     let repo = await fetchTopLanguages("ramonsantos9", ["test-repo-1"]);
    > 88 |     expect(repo).toStrictEqual({
         |                  ^
      89 |       HTML: {
      90 |         color: "#0f0",
      91 |         count: 1,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:88:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should fetch correct language data while using the old calculation

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 200,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 200,
        },
      }

      106 |
      107 |     let repo = await fetchTopLanguages("ramonsantos9", [], 1, 0);
    > 108 |     expect(repo).toStrictEqual({
          |                  ^
      109 |       HTML: {
      110 |         color: "#0f0",
      111 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:108:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should rank languages by the number of repositories they appear in

    expect(received).toStrictEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 0

      Object {
        "HTML": Object {
          "color": "#0f0",
    -     "count": 2,
          "name": "HTML",
          "size": 2,
        },
        "javascript": Object {
          "color": "#0ff",
    -     "count": 2,
          "name": "javascript",
          "size": 2,
        },
      }

      126 |
      127 |     let repo = await fetchTopLanguages("ramonsantos9", [], 0, 1);
    > 128 |     expect(repo).toStrictEqual({
          |                  ^
      129 |       HTML: {
      130 |         color: "#0f0",
      131 |         count: 2,

      at Object.toStrictEqual (tests/fetchTopLanguages.test.js:128:18)

  ÔùÅ FetchTopLanguages ÔÇ║ should throw error with specific message when error does not contain message property

    expect(received).rejects.toThrow(expected)

    Expected substring: "Something went wrong while trying to retrieve the language data using the GraphQL API."
    Received message:   "Ocorreu um erro ao buscar os dados de linguagens via GraphQL."

          104 |       );
          105 |     }
        > 106 |     throw new CustomError(
              |           ^
          107 |       "Ocorreu um erro ao buscar os dados de linguagens via GraphQL.",
          108 |       CustomError.GRAPHQL_ERROR,
          109 |     );

      at fetchTopLanguages (src/fetchers/top-languages.ts:106:11)
      at Object.<anonymous> (tests/fetchTopLanguages.test.js:167:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchTopLanguages.test.js:167:60)

FAIL tests/pin.test.js
  ÔùÅ Test /api/pin ÔÇ║ should render error card if user repo not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">User Repository Not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Reposit&#243;rio do usu&#225;rio n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      118 |
      119 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 120 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      121 |       renderError({ message: "User Repository Not found" }),
      122 |     );
      123 |   });

      at Object.toHaveBeenCalledWith (tests/pin.test.js:120:22)

  ÔùÅ Test /api/pin ÔÇ║ should render error card if org repo not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Organization Repository Not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Reposit&#243;rio da organiza&#231;&#227;o n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      141 |
      142 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 143 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      144 |       renderError({ message: "Organization Repository Not found" }),
      145 |     );
      146 |   });

      at Object.toHaveBeenCalledWith (tests/pin.test.js:143:22)

FAIL tests/gist.test.js
  ÔùÅ Test /api/gist ÔÇ║ should render error if gist is not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Gist not found</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "
    Received: "
        <svg width=\"576.5\"  height=\"120\" viewBox=\"0 0 576.5 120\" fill=\"#fffefe\" xmlns=\"http://www.w3.org/2000/svg\">
        <style>
        .text { font: 600 16px 'Segoe UI', Ubuntu, Sans-Serif; fill: #2f80ed }
        .small { font: 600 12px 'Segoe UI', Ubuntu, Sans-Serif; fill: #434d58 }
        .gray { fill: #858585 }
        </style>
        <rect x=\"0.5\" y=\"0.5\" width=\"575.5\" height=\"99%\" rx=\"4.5\" fill=\"#fffefe\" stroke=\"#e4e2e2\"/>
        <text x=\"25\" y=\"45\" class=\"text\">Algo deu errado! registre um problema em https://tiny.one/readme-stats</text>
        <text data-testid=\"message\" x=\"25\" y=\"55\" class=\"text small\">
          <tspan x=\"25\" dy=\"18\">Gist n&#227;o encontrado</tspan>
          <tspan x=\"25\" dy=\"18\" class=\"gray\"></tspan>
        </text>
        </svg>
      "

    Number of calls: 1

      152 |
      153 |     expect(res.setHeader).toHaveBeenCalledWith("Content-Type", "image/svg+xml");
    > 154 |     expect(res.send).toHaveBeenCalledWith(
          |                      ^
      155 |       renderError({ message: "Gist not found" }),
      156 |     );
      157 |   });

      at Object.toHaveBeenCalledWith (tests/gist.test.js:154:22)

FAIL tests/renderRepoCard.test.js
  ÔùÅ Test renderRepoCard ÔÇ║ should hide language if primaryLanguage is null & fallback to correct values

    expect(element).toHaveTextContent()

    Expected element to have text content:
      Unspecified
    Received:
      N├úo especificado

      120 |     );
      121 |
    > 122 |     expect(queryByTestId(document.body, "lang-name")).toHaveTextContent(
          |                                                       ^
      123 |       "Unspecified",
      124 |     );
      125 |   });

      at Object.toHaveTextContent (tests/renderRepoCard.test.js:122:55)

  ÔùÅ Test renderRepoCard ÔÇ║ should fallback to default description

    expect(element).toHaveTextContent()

    Expected element to have text content:
      No description provided
    Received:
      Sem descri├º├úo

      335 |       isArchived: true,
      336 |     });
    > 337 |     expect(document.getElementsByClassName("description")[0]).toHaveTextContent(
          |                                                               ^
      338 |       "No description provided",
      339 |     );
      340 |   });

      at Object.toHaveTextContent (tests/renderRepoCard.test.js:337:63)

FAIL tests/fetchGist.test.js
  ÔùÅ Test fetchGist ÔÇ║ should throw correct error if gist not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Gist not found"
    Received message:   "Gist n├úo encontrado"

          127 |
          128 |   if (!res.data.data.viewer.gist) {
        > 129 |     throw new Error("Gist n├úo encontrado");
              |           ^
          130 |   }
          131 |
          132 |   const data = res.data.data.viewer.gist;

      at fetchGist (src/fetchers/gist.ts:129:11)
      at Object.<anonymous> (tests/fetchGist.test.js:99:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchGist.test.js:99:73)

FAIL tests/retryer.test.ts
  ÔùÅ Testes em common/retryer.ts ÔÇ║ retryer deve lan├ºar erro espec├¡fico se o m├íximo de tentativas for atingido

    expect(received).toBe(expected) // Object.is equality

    Expected: "Downtime devido ao limite de taxa da API do GitHub"
    Received: "Servi├ºo indispon├¡vel por limite de taxa da API do GitHub"

      78 |     } catch (err: any) {
      79 |       expect(fetcherFail).toHaveBeenCalledTimes(RETRIES + 1);
    > 80 |       expect(err.message).toBe(
         |                           ^
      81 |         "Downtime devido ao limite de taxa da API do GitHub",
      82 |       );
      83 |     }

      at Object.toBe (tests/retryer.test.ts:80:27)

FAIL tests/fetchWakatime.test.js
  ÔùÅ WakaTime fetcher ÔÇ║ should throw error if username is not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Could not resolve to a User with the login of 'noone'"
    Received message:   "N├úo foi poss├¡vel encontrar o usu├írio 'noone' no WakaTime."

          55 |   } catch (err: any) {
          56 |     if (err.response?.status < 200 || err.response?.status > 299) {
        > 57 |       throw new CustomError(
             |             ^
          58 |         `N├úo foi poss├¡vel encontrar o usu├írio '${username}' no WakaTime.`,
          59 |         "WAKATIME_USER_NOT_FOUND",
          60 |       );

      at fetchWakatimeStats (src/fetchers/wakatime.ts:57:13)
      at Object.<anonymous> (tests/fetchWakatime.test.js:129:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchWakatime.test.js:129:69)

FAIL tests/retryer.test.js
  ÔùÅ Test Retryer ÔÇ║ retryer should throw specific error if maximum retries reached

    expect(received).toBe(expected) // Object.is equality

    Expected: "Downtime due to GitHub API rate limiting"
    Received: "Servi├ºo indispon├¡vel por limite de taxa da API do GitHub"

      78 |       expect(fetcherFail).toHaveBeenCalledTimes(RETRIES + 1);
      79 |       // @ts-ignore
    > 80 |       expect(err.message).toBe("Downtime due to GitHub API rate limiting");
         |                           ^
      81 |     }
      82 |   });
      83 | });

      at Object.toBe (tests/retryer.test.js:80:27)

FAIL tests/fetchRepo.test.js
  ÔùÅ Test fetchRepo ÔÇ║ should throw error if user is found but repo is null

    expect(received).rejects.toThrow(expected)

    Expected substring: "User Repository Not found"
    Received message:   "Reposit├│rio do usu├írio n├úo encontrado"

          107 |   if (isUser) {
          108 |     if (!data.user.repository || data.user.repository.isPrivate) {
        > 109 |       throw new Error("Reposit├│rio do usu├írio n├úo encontrado");
              |             ^
          110 |     }
          111 |     return {
          112 |       ...data.user.repository,

      at fetchRepo (src/fetchers/repo.ts:109:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:68:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:68:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if org is found but repo is null

    expect(received).rejects.toThrow(expected)

    Expected substring: "Organization Repository Not found"
    Received message:   "Reposit├│rio da organiza├º├úo n├úo encontrado"

          120 |       data.organization.repository.isPrivate
          121 |     ) {
        > 122 |       throw new Error("Reposit├│rio da organiza├º├úo n├úo encontrado");
              |             ^
          123 |     }
          124 |     return {
          125 |       ...data.organization.repository,

      at fetchRepo (src/fetchers/repo.ts:122:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:78:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:78:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if both user & org data not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Not found"
    Received message:   "N├úo encontrado"

           99 |
          100 |   if (!data.user && !data.organization) {
        > 101 |     throw new Error("N├úo encontrado");
              |           ^
          102 |   }
          103 |
          104 |   const isUser = data.organization === null && data.user;

      at fetchRepo (src/fetchers/repo.ts:101:11)
      at Object.<anonymous> (tests/fetchRepo.test.js:88:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:88:66)

  ÔùÅ Test fetchRepo ÔÇ║ should throw error if repository is private

    expect(received).rejects.toThrow(expected)

    Expected substring: "User Repository Not found"
    Received message:   "Reposit├│rio do usu├írio n├úo encontrado"

          107 |   if (isUser) {
          108 |     if (!data.user.repository || data.user.repository.isPrivate) {
        > 109 |       throw new Error("Reposit├│rio do usu├írio n├úo encontrado");
              |             ^
          110 |     }
          111 |     return {
          112 |       ...data.user.repository,

      at fetchRepo (src/fetchers/repo.ts:109:13)
      at Object.<anonymous> (tests/fetchRepo.test.js:101:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchRepo.test.js:101:66)

FAIL tests/renderWakatimeCard.test.js
  ÔùÅ WakaTime fetcher ÔÇ║ should throw error if username is not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Could not resolve to a User with the login of 'noone'"
    Received message:   "N├úo foi poss├¡vel encontrar o usu├írio 'noone' no WakaTime."

          55 |   } catch (err: any) {
          56 |     if (err.response?.status < 200 || err.response?.status > 299) {
        > 57 |       throw new CustomError(
             |             ^
          58 |         `N├úo foi poss├¡vel encontrar o usu├írio '${username}' no WakaTime.`,
          59 |         "WAKATIME_USER_NOT_FOUND",
          60 |       );

      at fetchWakatimeStats (src/fetchers/wakatime.ts:57:13)
      at Object.<anonymous> (tests/fetchWakatime.test.js:129:5)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/fetchWakatime.test.js:129:69)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

       8 |   it("should render correctly", () => {
       9 |     const card = renderWakatimeCard(wakaTimeData.data);
    > 10 |     expect(card).toMatchSnapshot();
         |                  ^
      11 |   });
      12 |
      13 |   it("should render correctly with compact layout", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:10:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with compact layout

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with compact layout 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      14 |     const card = renderWakatimeCard(wakaTimeData.data, { layout: "compact" });
      15 |
    > 16 |     expect(card).toMatchSnapshot();
         |                  ^
      17 |   });
      18 |
      19 |   it("should render correctly with compact layout when langs_count is set", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:16:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with compact layout when langs_count is set

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with compact layout when langs_count is set 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      23 |     });
      24 |
    > 25 |     expect(card).toMatchSnapshot();
         |                  ^
      26 |   });
      27 |
      28 |   it("should hide languages when hide is passed", () => {

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:25:18)

  ÔùÅ Test Render WakaTime Card ÔÇ║ should render correctly with percent display format

    expect(received).toMatchSnapshot()

    Snapshot name: `Test Render WakaTime Card should render correctly with percent display format 1`

    - Snapshot  - 3
    + Received  + 4

    @@ -9,26 +9,27 @@
              aria-labelledby="descId"
            >
              <title id="titleId"></title>
              <desc id="descId"></desc>
              <style>
    +           
                .header {
    -             font: 600 18px 'Segoe UI', Ubuntu, Sans-Serif;
    +             font: 600 18px "'Segoe UI', Ubuntu, Sans-Serif";
                  fill: #2f80ed;
                  animation: fadeInAnimation 0.8s ease-in-out forwards;
                }
                @supports(-moz-appearance: auto) {
    -             /* Selector detects Firefox */
    +             /* Seletor detecta Firefox */
                  .header { font-size: 15.5px; }
                }
                
          
          .stat {
            font: 600 14px 'Segoe UI', Ubuntu, "Helvetica Neue", Sans-Serif; fill: #434d58;
          }
          @supports(-moz-appearance: auto) {
    -       /* Selector detects Firefox */
    +       /* Seletor detecta Firefox */
            .stat { font-size:12px; }
          }
          .stagger {
            opacity: 0;
            animation: fadeInAnimation 0.3s ease-in-out forwards;

      88 |       display_format: "percent",
      89 |     });
    > 90 |     expect(card).toMatchSnapshot();
         |                  ^
      91 |   });
      92 | });
      93 |

      at Object.toMatchSnapshot (tests/renderWakatimeCard.test.js:90:18)

FAIL tests/i18n.test.ts
  ÔùÅ I18n ÔÇ║ deve lan├ºar erro se a string de tradu├º├úo n├úo for encontrada

    expect(received).toThrow(expected)

    Expected substring: "statcard.title1 Tradu├º├úo n├úo encontrada"
    Received message:   "String de tradu├º├úo \"statcard.title1\" n├úo encontrada"

          67 |   t(str: string): string {
          68 |     if (!this.translations[str]) {
        > 69 |       throw new Error(`String de tradu├º├úo "${str}" n├úo encontrada`);
             |             ^
          70 |     }
          71 |
          72 |     if (!this.translations[str][this.locale]) {

      at I18n.t (src/common/I18n.ts:69:13)
      at t (tests/i18n.test.ts:19:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.ts:19:45)
      at Object.toThrow (tests/i18n.test.ts:19:45)

  ÔùÅ I18n ÔÇ║ deve lan├ºar erro se a tradu├º├úo n├úo for encontrada para o locale

    expect(received).toThrow(expected)

    Expected substring: "'statcard.title' tradu├º├úo n├úo encontrada para o locale 'asdf'"
    Received message:   "Tradu├º├úo para \"statcard.title\" n├úo encontrada para o locale \"asdf\""

          71 |
          72 |     if (!this.translations[str][this.locale]) {
        > 73 |       throw new Error(
             |             ^
          74 |         `Tradu├º├úo para "${str}" n├úo encontrada para o locale "${this.locale}"`,
          75 |       );
          76 |     }

      at I18n.t (src/common/I18n.ts:73:13)
      at t (tests/i18n.test.ts:29:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.ts:29:44)
      at Object.toThrow (tests/i18n.test.ts:29:44)

FAIL tests/i18n.test.js
  ÔùÅ I18n ÔÇ║ should throw error if translation string not found

    expect(received).toThrow(expected)

    Expected substring: "statcard.title1 Translation string not found"
    Received message:   "String de tradu├º├úo \"statcard.title1\" n├úo encontrada"

          67 |   t(str: string): string {
          68 |     if (!this.translations[str]) {
        > 69 |       throw new Error(`String de tradu├º├úo "${str}" n├úo encontrada`);
             |             ^
          70 |     }
          71 |
          72 |     if (!this.translations[str][this.locale]) {

      at I18n.t (src/common/I18n.ts:69:13)
      at t (tests/i18n.test.js:19:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.js:19:45)
      at Object.toThrow (tests/i18n.test.js:19:45)

  ÔùÅ I18n ÔÇ║ should throw error if translation not found for locale

    expect(received).toThrow(expected)

    Expected substring: "'statcard.title' translation not found for locale 'asdf'"
    Received message:   "Tradu├º├úo para \"statcard.title\" n├úo encontrada para o locale \"asdf\""

          71 |
          72 |     if (!this.translations[str][this.locale]) {
        > 73 |       throw new Error(
             |             ^
          74 |         `Tradu├º├úo para "${str}" n├úo encontrada para o locale "${this.locale}"`,
          75 |       );
          76 |     }

      at I18n.t (src/common/I18n.ts:73:13)
      at t (tests/i18n.test.js:29:23)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/i18n.test.js:29:44)
      at Object.toThrow (tests/i18n.test.js:29:44)

FAIL tests/renderGistCard.test.js
  ÔùÅ test renderGistCard ÔÇ║ should fallback to default description

    expect(element).toHaveTextContent()

    Expected element to have text content:
      No description provided
    Received:
      Sem descri├º├úo

      233 |       description: undefined,
      234 |     });
    > 235 |     expect(document.getElementsByClassName("description")[0]).toHaveTextContent(
          |                                                               ^
      236 |       "No description provided",
      237 |     );
      238 |   });

      at Object.toHaveTextContent (tests/renderGistCard.test.js:235:63)

FAIL tests/renderStatsCard.test.js
  ÔùÅ Test renderStatsCard ÔÇ║ should throw error if all stats and rank icon are hidden

    expect(received).toThrow(expected)

    Expected message: "Could not render stats card."
    Received message: "N├úo foi poss├¡vel renderizar o card de estat├¡sticas."

          477 |
          478 |   if (statItems.length === 0 && hide_rank) {
        > 479 |     throw new CustomError(
              |           ^
          480 |       "N├úo foi poss├¡vel renderizar o card de estat├¡sticas.",
          481 |       "Pelo menos as estat├¡sticas ou o rank s├úo obrigat├│rios.",
          482 |     );

      at renderStatsCard (src/cards/stats.ts:479:11)
      at renderStatsCard (tests/renderStatsCard.test.js:461:7)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/renderStatsCard.test.js:465:7)
      at Object.toThrow (tests/renderStatsCard.test.js:465:7)

FAIL tests/fetchStats.test.js
  ÔùÅ Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)


Snapshot Summary
 ÔÇ║ 4 snapshots failed from 1 test suite. Inspect your code changes or run `npm test -- -u` to update them.

Test Suites: 17 failed, 16 passed, 33 total
Tests:       33 failed, 223 passed, 256 total
Snapshots:   4 failed, 5 passed, 9 total
Time:        15.641 s
Ran all test suites.
